"use strict";angular.module("je.filters",[]).filter("jeCollection",function(){return function(a){return angular.isArray(a)||angular.isObject(a)?a:[]}}).filter("jeType",function(){return function(a){var b="atomic";switch(!0){case angular.isArray(a):b="array";break;case angular.isObject(a):b="object"}return b}}).filter("jeTreeNodeValue",function(){return function(a){return angular.isArray(a)||angular.isObject(a)?"":null===a?"null":a}}),angular.module("je.services",[]).factory("jeConverter",function(){var a=function c(a){var b=[];return angular.forEach(a,function(a,d){switch(!0){case null===a:b.push({key:d,type:"null",value:"null"});break;case angular.isArray(a):b.push({key:d,type:"array",children:c(a)});break;case angular.isObject(a):b.push({key:d,type:"object",children:c(a)});break;default:b.push({key:d,type:typeof a,value:a})}}),b},b=function d(a){var b={};return angular.forEach(a,function(a){switch(!0){case"null"===a.type:b[a.key]=null;break;case"array"===a.type:var c=[];a.hasOwnProperty("children")&&angular.isArray(a.children)&&(angular.forEach(d(a.children),function(a){c.push(a)}),b[a.key]=c);break;case"object"===a.type:a.hasOwnProperty("children")&&angular.isArray(a.children)&&(b[a.key]=d(a.children));break;default:b[a.key]=a.value}}),b};return{object2ast:a,ast2object:b}}),angular.module("je.ace",["ui.ace"]).directive("jeAce",function(){return{restrict:"EA",template:'<div class="je-ace" ui-ace="$parent.jsoneditor.ace.options" ng-model="$parent.jsoneditor.json"></div>',replace:!0,transclude:!0,link:function(){}}}),angular.module("je.text",[]).directive("jeText",function(){return{restrict:"EA",template:'<div class="je-text"><textarea ng-model="$parent.jsoneditor.json"></textarea></div>',replace:!0,link:function(){}}}),angular.module("je.tree",["je.filters","sj.input"]).directive("jeTree",["$compile",function(){return{restrict:"EA",template:'<div ng-focus="focus" ng-mouseenter="sync(false)" ng-mouseleave="sync(true)" class="je-tree">  <ul class="je-tree-node clear">    <je-tree-node ng-repeat="item in _ast" amount="amount" item="item"/>  </ul></div>',replace:!0,link:function(a){a._ast=[{key:"Sample",type:"object",children:[]}],a.$watch("jsoneditor.ast",function(b){a._ast[0].children=b},!0),a.sync=function(b){a.jsoneditor.sync.ast=b},a.amount=function(a){if(!angular.isArray(a)&&!angular.isObject(a))return null;var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}}}}]).directive("jeTreeNode",["$compile",function(a){return{restrict:"EA",template:'<li ng-style="treeOpener(item)">  <span class="je-tree-node-key" ng-show="$parent.item.type == \'array\'" ng-bind="item.key"></span>  <input sj-input class="je-tree-node-key" ng-show="$parent.item.type == \'object\'" type="text" ng-model="item.key">  <span class="je-tree-node-key-value-seperator" ng-show="valAtomic(item)"></span>  <input sj-input class="je-tree-node-value" type="text" ng-model="item.value" ng-show="valAtomic(item)">  <span class="je-tree-node-amount je-tree-node-type-{{item.type}}">{{amount(item.children)}}</span></li>',replace:!0,scope:{item:"=",amount:"="},link:function(b,c){b.children=null,b.treeOpener=function(a){return b.valAtomic(a)?{listStyleType:"none"}:""},b.valAtomic=function(a){return!a.hasOwnProperty("children")};var d='<ul>  <je-tree-node     ng-repeat="childitem in item.children | jeCollection track by $id(childitem)"     item="childitem"     amount="amount" /></ul>';angular.isElement(b.children)&&b.children.remove(),b.children=a(d)(b),c.append(b.children)}}}]),angular.module("jsoneditor",["je.services","je.ace","je.text","je.tree"]).directive("jeSplitter",["$compile","jeConverter",function(a,b){return{restrict:"EA",template:'<div ng-mousemove="move($event)" ng-mouseleave="jsoneditor.dragging = false" class="je-splitter" ng-transclude></div>',replace:!0,transclude:!0,controller:["$scope","$element","$attrs","$transclude",function(c,d){var e={array:[1,2,3],"boolean":!0,"null":null,number:123,object:{a:"b",c:"d",e:"f"},string:"Hello World"};c.jsoneditor={json:JSON.stringify(e),object:{},ast:[],tree:[],sync:{ast:!0},ace:{options:{mode:"json",showIndentGuides:!1,showInvisibles:!1,showPrintMargin:!1,useWrapMode:!0}},container:{width:{left:100,right:100},editor:{left:null,right:null}},dragElement:null,dragging:!1},c.$watch("jsoneditor.json",function(a){try{c.jsoneditor.object=JSON.parse(a)}catch(d){return void console.log("could not parse the json")}c.jsoneditor.sync.ast&&(c.jsoneditor.ast=b.object2ast(c.jsoneditor.object))}),c.$watch("jsoneditor.ast",function(a){angular.isObject(a)&&(c.jsoneditor.object=b.ast2object(a))},!0),c.$watch("jsoneditor.object",function(a){c.jsoneditor.json=JSON.stringify(a)},!0),c.move=function(a){if(c.jsoneditor.dragging){var b=a.clientX-d[0].offsetLeft,e=d[0].offsetWidth,f=100*b/e;c.resizeEditors(f)}},c.$watch("jsoneditor.container.width",function(a){angular.isObject(c.jsoneditor.container.editor.left)&&angular.isObject(c.jsoneditor.container.editor.right)&&(c.jsoneditor.container.editor.left.style.width=a.left+"%",c.jsoneditor.container.editor.right.style.width=a.right+"%")},!0),c.resizeEditors=function(a){if(c.jsoneditor.dragging){var b=d[0].offsetWidth,e=0;if(angular.isObject(c.jsoneditor.dragElement)){var f=c.jsoneditor.dragElement[0],g=f.currentStyle||window.getComputedStyle(f),h=parseInt(g.marginLeft,10)+parseInt(g.marginRight,10),i=h+f.offsetWidth;e=100*(i/b)/2}c.jsoneditor.container.width.left=a-e,c.jsoneditor.container.width.right=100-a-e}},this.removeChildren=function(a){var b=a[0].children.length,c=0;angular.forEach(a[0].children,function(a){a.hasAttribute("je-container")||(a.remove(),c++)});var d=b-c;if(d>2)for(var e=2;d>e;e++)a[0].children[e].remove()},this.addAttribute=function(a,b,c){var d=document.createAttribute(b);d.nodeValue=c,a.setAttributeNode(d)},this.addDrag=function(b){var d=a("<div je-drag></div>")(c);return angular.element(b[0].children[0]).after(d),d}}],link:function(a,b,c,d){d.removeChildren(b),b[0].children.length>0&&(a.jsoneditor.container.editor.left=b[0].children[0],b[0].children.length>1&&(a.jsoneditor.container.editor.right=b[0].children[1],a.jsoneditor.dragElement=d.addDrag(b)))}}}]).directive("jeContainer",function(){return{restrict:"EA",template:'<div ng-style="" class="je-container" ng-transclude></div>',replace:!0,transclude:!0,link:function(){}}}).directive("jeDrag",function(){return{restrict:"EA",controller:["$scope","$element","$attrs","$transclude",function(){}],template:'<div class="je-drag je-unselectable" ng-mousedown="jsoneditor.dragging = true" ng-mouseup="jsoneditor.dragging = false">â‹®</div>',replace:!0,link:function(){}}}),angular.module("angularJsonEditor",["jsoneditor"]),angular.module("angularJsonEditor").controller("MainCtrl",["$scope",function(){}]);